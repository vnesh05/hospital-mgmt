<!DOCTYPE html>
<html>
<head>
  <title>Update Patient</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-6">

  <div class="bg-white p-8 rounded-xl shadow-lg w-full max-w-lg">
    <h1 class="text-2xl font-bold mb-6 text-gray-800">Update Patient Details</h1>

    <form action="/patients/update/<%= patient._id %>" method="POST" class="space-y-4">

      <div>
        <label class="block font-medium mb-1">Name:</label>
        <input type="text" name="name" value="<%= patient.name || '' %>" required
               class="w-full border border-gray-300 p-2 rounded-lg focus:ring-2 focus:ring-blue-500">
      </div>

      <div>
        <label class="block font-medium mb-1">Age:</label>
        <input type="number" name="age" value="<%= patient.age || '' %>"
               class="w-full border border-gray-300 p-2 rounded-lg focus:ring-2 focus:ring-blue-500">
      </div>

      <div>
        <label class="block font-medium mb-1">Gender:</label>
        <select name="gender"
                class="w-full border border-gray-300 p-2 rounded-lg focus:ring-2 focus:ring-blue-500">
          <option value="Male" <%= patient.gender === 'Male' ? 'selected' : '' %>>Male</option>
          <option value="Female" <%= patient.gender === 'Female' ? 'selected' : '' %>>Female</option>
          <option value="Other" <%= patient.gender === 'Other' ? 'selected' : '' %>>Other</option>
        </select>
      </div>

      <div>
        <label class="block font-medium mb-1">Contact Number:</label>
        <input type="text" name="contactNumber" value="<%= patient.contactNumber || '' %>"
               class="w-full border border-gray-300 p-2 rounded-lg focus:ring-2 focus:ring-blue-500">
      </div>

      <div>
        <label class="block font-medium mb-1">Address:</label>
        <textarea name="address"
                  class="w-full border border-gray-300 p-2 rounded-lg focus:ring-2 focus:ring-blue-500"><%= patient.address || '' %></textarea>
      </div>

      <div>
        <label class="block font-medium mb-1">Blood Group:</label>
        <input type="text" name="bloodGroup" value="<%= patient.bloodGroup || '' %>"
               class="w-full border border-gray-300 p-2 rounded-lg focus:ring-2 focus:ring-blue-500">
      </div>

      <div>
        <label class="block font-medium mb-1">Medical History (comma-separated):</label>
        <input type="text" name="medicalHistory"
               value="<%= (patient.medicalHistory && patient.medicalHistory.length) ? patient.medicalHistory.join(', ') : '' %>"
               class="w-full border border-gray-300 p-2 rounded-lg focus:ring-2 focus:ring-blue-500">
      </div>

      <div>
        <label class="block font-medium mb-1">Doctor Assigned:</label>
        <select name="doctorAssigned"
                class="w-full border border-gray-300 p-2 rounded-lg focus:ring-2 focus:ring-blue-500">
          <option value="">-- Select Doctor --</option>
          <% doctors.forEach(doctor => { %>
            <option value="<%= doctor._id %>"
              <%= patient.doctorAssigned && patient.doctorAssigned.toString() === doctor._id.toString() ? 'selected' : '' %>>
              <%= doctor.name %>
            </option>
          <% }) %>
        </select>
      </div>

      <button type="submit"
              class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition">Update Patient</button>
    </form>

    <a href="/patients/view"
       class="block text-center mt-6 text-blue-600 hover:underline">‚Üê Back to Patient List</a>
  </div>

</body>
</html>